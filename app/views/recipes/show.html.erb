# <% if can? :read , @recipe %>
# <div class="recipe-detail">
# <h1><%= @recipe.name %></h1>
# <div>
# <div class="detals">
#   <div class="info">
#   <div class="time">
#     <p class="fs-4">Preparation time:  </p><span class="fs-4"><%=@recipe.preparationTime%></span>
#     </div>
#     <div class="time">
#     <p class="fs-4">Cooking time:  </p><span class="fs-4"><%=@recipe.cookingTime%></span>
#     </div>
#   </div>
#   <% if can? :update, @recipe%>
#     <div class="status">
#       <%= form_with url: update_path(@recipe), method: "put" do |form| %>
#         <div class="form-check form-switch">
#           <% if @recipe.public == false %>
#             <%= form.check_box :public, class:"form-check-input fs-4", id:"flexSwitchCheckDefault", onchange: "this.form.submit();"%>
#             <label class="form-check-label fs-4" for="flexSwitchCheckDefault">Public</label>
#           <% else %>
#             <%= form.check_box :public, class:"form-check-input fs-4", id:"flexSwitchCheckChecked", checked: true, onchange: "this.form.submit();" %>
#             <label class="form-check-label fs-4" for="flexSwitchCheckChecked">Public</label>
#           <%end%>
#         </div>
#       <%end%>
#     </div>
#   <%end%>
#   </div>
#   <div>
#   <div class="descr bg-light mb-3">
#     <p class="fs-5"><%=@recipe.description%></p>
#   </div>
#   </div>
#   <div class="actions">
#     <div class="gen-shopping-list">
#       <%= link_to 'Generate shopping list', recipes_path, class: 'btn btn-outline-dark' %>
#     </div>
#     <% if can? :update, @recipe%>
#      <div class="add-ingredient">
#       <%= link_to 'Add igredient', new_recipe_recipe_food_path(@recipe), class: 'btn btn-outline-dark' %>
#     </div>
#     <%end%>
#   </div>
#   <hr>
# </div>


# <table class="table table-striped table-bordered">
#  <% if @recipe.recipe_foods.any? %>
#     <thead>
#         <tr>
#         <th>Food</th>
#         <th>Quantity</th>
#         <th>Value</th>
#         <th>Action</th>
#         </tr>
#     </thead>

#     <tbody>
#     <% @recipe.recipe_foods.each do |fd|%>
#     <tr>
#       <td><%= fd.food.name%></th>
#       <td><%= fd.quantity%></td>
#       <td><%= fd.quantity* fd.food.price %></td>
#       <td class="mb-3 col-sm-3">
#       <% if can? :destroy, @recipe %>

#         <%=link_to "Delete", recipe_recipe_food_path(recipe_id: @recipe.id, id: fd.id), method: :delete, class:"btn btn-outline-dark"%>
#         <%=link_to "Modify", edit_recipe_recipe_food_path(recipe_id: @recipe.id, id: fd.id), class:"btn btn-outline-dark"%>
#       <%end%>
#       </td>
#     </tr>
#     </tbody>
#     <%end%>
#   <%end%>
# </table>
# </div>
# <%end%>

<section class="recipe-details">
  <h2><%= @recipe.name %></h2>

  <div class="main-detail d-flex">
    <div class="recipe">
      <p>Preparation time: <%=@recipe.preparation_time%> hour</p>
      <p>Cooking time: <%=@recipe.cooking_time%> hours</p>
      <p>Step go here ...</p>
    </div>
    <div>
      <% if @recipe.public %>
        <p>Public: ON</p>
      <% else %>
        <p>Public: OFF</p>
      <% end %>
    </div>
  </div>
  <div class="detail-btns d-flex">
    <button>
     <%= link_to 'Generate shopping list', general_shopping_lists_path(@recipe), data: { turbo: false }, html: { method: :put}, class: "add-foods" %>
    </button>
    <button>
      <%= link_to 'Add ingredients', new_recipe_recipe_food_url(@recipe), data: { turbo: false }, html: { method: :put} %>
    </button>
  </div>
  <div class="line-detail"></div>

  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th scope="col">Food</th>
        <th scope="col">Quantity</th>
        <th scope="col">Value</th>
        <th scope="col">Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @recipe_foods.each do |recipe_food| %>
        <tr>
          <td><%= recipe_food.food.name%></td>
          <td><%= recipe_food.quantity%></td>
          <td> $ <%= recipe_food.food.price %></td>
          <th scope="col">
            <%= button_to 'Remove', recipe_recipe_food_path(@recipe.id, recipe_food.id), method: :delete %>
          </th>
        </tr>
      <% end %>
    </tbody>
  </table>


  <div class="recipe-btn">
    <button>
      <%= link_to "back", public_recipes_path %>
      <% link_to "back", recipes_path %>
    </button>
  </div>
</section>